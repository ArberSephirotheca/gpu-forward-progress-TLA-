#version 450
#extension GL_EXT_shader_atomic_float : enable
#extension GL_KHR_shader_subgroup_basic : enable

shared uint lock;

void main() {
  lock = 0;
  uint old = 1;
  do {
     old = atomicExchange(lock, 1);
  } while (old != 0);
  lock = 0;
}

